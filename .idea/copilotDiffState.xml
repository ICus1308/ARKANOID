<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/userinterface/screen/SettingScreen.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/userinterface/screen/SettingScreen.java" />
              <option name="originalContent" value="package userinterface.screen;&#10;&#10;import gamemanager.ui.GameButton;&#10;import gamemanager.ui.UIManager;&#10;import gamemanager.manager.SoundManager;&#10;import javafx.geometry.Insets;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.CheckBox;&#10;import javafx.scene.control.ComboBox;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.control.Slider;&#10;import javafx.scene.layout.*;&#10;import javafx.stage.Stage;&#10;&#10;import static gameconfig.GameConfig.*;&#10;&#10;public class SettingScreen extends UIManager {&#10;    private BorderPane layout;&#10;    private final Runnable onBack;&#10;    private final Runnable onResolutionChange;&#10;    private VBox contentArea;&#10;&#10;    private GameButton videoButton;&#10;    private GameButton audioButton;&#10;    private GameButton debugButton;&#10;&#10;    private ComboBox&lt;String&gt; resolutionCombo;&#10;    private ComboBox&lt;String&gt; displayModeCombo;&#10;&#10;    private Slider masterVolumeSlider;&#10;    private CheckBox muteCheckbox;&#10;    private Label volumeValueLabel;&#10;    private double masterVolume = 100.0;&#10;    private boolean muted = false;&#10;&#10;    private final String[] resolutions = {&quot;1280x720&quot;, &quot;1366x768&quot;, &quot;1600x900&quot;};&#10;    private final String[] displayModes = {&quot;Windowed&quot;, &quot;Fullscreen&quot;};&#10;&#10;    public SettingScreen(Pane root, Runnable onBack, Runnable onResolutionChange) {&#10;        super(root);&#10;        this.onBack = onBack;&#10;        this.onResolutionChange = onResolutionChange;&#10;    }&#10;&#10;    @Override&#10;    protected void initializeUI() {&#10;        layout = new BorderPane();&#10;        layout.setPrefSize(GAME_WIDTH, GAME_HEIGHT);&#10;        layout.setStyle(&quot;-fx-background-color: rgba(44, 62, 80, 0.9);&quot;);&#10;&#10;        VBox sidebar = createSidebar();&#10;        layout.setLeft(sidebar);&#10;&#10;        contentArea = createContentArea();&#10;        layout.setCenter(contentArea);&#10;&#10;        updateContentArea(&quot;VIDEO&quot;);&#10;    }&#10;&#10;    private VBox createSidebar() {&#10;        VBox sidebar = new VBox();&#10;        sidebar.setPrefWidth(280 * UI_SCALE_X);&#10;        sidebar.setStyle(&quot;-fx-background-color: rgba(34, 52, 70, 0.9);&quot;);&#10;        sidebar.setPadding(new Insets(40, 20, 40, 20));&#10;        sidebar.setSpacing(15);&#10;&#10;        createCategoryButtons();&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        GameButton backButton = createButton(&quot;BACK&quot;, onBack);&#10;&#10;        sidebar.getChildren().addAll(videoButton, audioButton, debugButton, spacer, backButton);&#10;        return sidebar;&#10;    }&#10;&#10;    private void createCategoryButtons() {&#10;        videoButton = createButton(&quot;VIDEO&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;        audioButton = createButton(&quot;AUDIO&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;        debugButton = createButton(&quot;DEBUG&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;&#10;        videoButton.switchStyle(ButtonStyle.CATEGORY_SELECTED);&#10;&#10;        videoButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;VIDEO&quot;, videoButton);&#10;        });&#10;        audioButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;AUDIO&quot;, audioButton);&#10;        });&#10;        debugButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;DEBUG&quot;, debugButton);&#10;        });&#10;    }&#10;&#10;    private void selectCategory(String category, GameButton selectedButton) {&#10;        videoButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        audioButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        debugButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        selectedButton.switchStyle(ButtonStyle.CATEGORY_SELECTED);&#10;&#10;        updateContentArea(category);&#10;    }&#10;&#10;    private VBox createContentArea() {&#10;        VBox content = new VBox();&#10;        content.setStyle(&quot;-fx-background-color: transparent;&quot;);&#10;        content.setPadding(new Insets(40, 40, 40, 40));&#10;        return content;&#10;    }&#10;&#10;    private void updateContentArea(String category) {&#10;        contentArea.getChildren().clear();&#10;&#10;        switch (category) {&#10;            case &quot;VIDEO&quot;:&#10;                showVideoSettings();&#10;                break;&#10;            case &quot;AUDIO&quot;:&#10;                showAudioSettings();&#10;                break;&#10;            case &quot;DEBUG&quot;:&#10;                showDebugSettings();&#10;                break;&#10;        }&#10;    }&#10;&#10;    private void showVideoSettings() {&#10;        Label titleLabel = createTitleLabel(&quot;VIDEO SETTINGS&quot;);&#10;        VBox settingsPanel = createVideoSettingsPanel();&#10;        GameButton applyButton = createButton(&quot;✓ APPLY CHANGES&quot;, ButtonStyle.APPLY, this::applyVideoSettings);&#10;&#10;        HBox applyButtonBox = new HBox(applyButton);&#10;        applyButtonBox.setAlignment(Pos.BOTTOM_RIGHT);&#10;        applyButtonBox.setPadding(new Insets(30, 0, 0, 0));&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel, spacer, applyButtonBox);&#10;    }&#10;&#10;    private VBox createVideoSettingsPanel() {&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        displayModeCombo = new ComboBox&lt;&gt;();&#10;        displayModeCombo.getItems().addAll(displayModes);&#10;&#10;        Stage stage = (Stage) root.getScene().getWindow();&#10;        if (stage != null &amp;&amp; stage.isFullScreen()) {&#10;            displayModeCombo.getSelectionModel().select(&quot;Fullscreen&quot;);&#10;        } else {&#10;            displayModeCombo.getSelectionModel().select(&quot;Windowed&quot;);&#10;        }&#10;        Label displayModeLabel = createSettingRow(&quot;Display Mode:&quot;, displayModeCombo);&#10;&#10;        resolutionCombo = new ComboBox&lt;&gt;();&#10;        resolutionCombo.getItems().addAll(resolutions);&#10;        String currentResolution = ((int)GAME_WIDTH) + &quot;x&quot; + ((int)GAME_HEIGHT);&#10;        if (resolutionCombo.getItems().contains(currentResolution)) {&#10;            resolutionCombo.getSelectionModel().select(currentResolution);&#10;        } else {&#10;            resolutionCombo.getSelectionModel().select(0);&#10;        }&#10;        Label resolutionLabel = createSettingRow(&quot;Resolution:&quot;, resolutionCombo);&#10;&#10;        // Disable resolution when fullscreen is selected&#10;        displayModeCombo.valueProperty().addListener((obs, oldVal, newVal) -&gt; {&#10;            resolutionCombo.setDisable(&quot;Fullscreen&quot;.equals(newVal));&#10;        });&#10;&#10;        // Set initial state&#10;        resolutionCombo.setDisable(&quot;Fullscreen&quot;.equals(displayModeCombo.getValue()));&#10;&#10;        VBox displayModeRow = new VBox(5, displayModeLabel, displayModeCombo);&#10;        VBox resolutionRow = new VBox(5, resolutionLabel, resolutionCombo);&#10;&#10;        settingsPanel.getChildren().addAll(displayModeRow, resolutionRow);&#10;        return settingsPanel;&#10;    }&#10;&#10;    private void showAudioSettings() {&#10;        SoundManager soundManager = SoundManager.getInstance();&#10;        masterVolume = soundManager.getMasterVolume() * 100;&#10;        muted = soundManager.isMuted();&#10;&#10;        Label titleLabel = createTitleLabel(&quot;AUDIO SETTINGS&quot;);&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        Label volumeLabel = createLabel(&quot;Master Volume:&quot;, TEXT_COLOR);&#10;        masterVolumeSlider = new Slider(0, 100, masterVolume);&#10;        masterVolumeSlider.setPrefWidth(360 * UI_SCALE_X);&#10;        masterVolumeSlider.setPrefHeight(35);&#10;        masterVolumeSlider.setMajorTickUnit(10);&#10;        masterVolumeSlider.setShowTickMarks(false);&#10;        masterVolumeSlider.setShowTickLabels(false);&#10;&#10;        volumeValueLabel = createLabel((int) masterVolume + &quot;%&quot;, TEXT_COLOR);&#10;        volumeValueLabel.setPadding(new Insets(0, 0, 0, 10));&#10;&#10;        masterVolumeSlider.valueProperty().addListener((&#10;                observable,&#10;                oldValue,&#10;                newValue) -&gt; {&#10;            int val = (int) Math.round(newValue.doubleValue());&#10;            volumeValueLabel.setText(val + &quot;%&quot;);&#10;        });&#10;&#10;        HBox volumeRow = new HBox(10, masterVolumeSlider, volumeValueLabel);&#10;        volumeRow.setAlignment(Pos.CENTER_LEFT);&#10;&#10;        muteCheckbox = new CheckBox(&quot;Mute&quot;);&#10;        muteCheckbox.setStyle(&quot;-fx-text-fill: white;&quot;);&#10;        muteCheckbox.setSelected(muted);&#10;        muteCheckbox.selectedProperty().addListener((&#10;                obs,&#10;                wasSelected,&#10;                isSelected) -&gt; {&#10;            masterVolumeSlider.setDisable(isSelected);&#10;        });&#10;&#10;        VBox volumeSection = new VBox(5, volumeLabel, volumeRow, muteCheckbox);&#10;&#10;        settingsPanel.getChildren().addAll(volumeSection);&#10;&#10;        GameButton applyButton = createButton(&quot;✓ APPLY CHANGES&quot;, ButtonStyle.APPLY, this::applyAudioSettings);&#10;        HBox applyButtonBox = new HBox(applyButton);&#10;        applyButtonBox.setAlignment(Pos.BOTTOM_RIGHT);&#10;        applyButtonBox.setPadding(new Insets(30, 0, 0, 0));&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel, spacer, applyButtonBox);&#10;    }&#10;&#10;    private void showDebugSettings() {&#10;        Label titleLabel = createTitleLabel(&quot;DEBUG SETTINGS&quot;);&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        Label placeholderLabel = createLabel(&quot;Debug settings coming soon...&quot;, TEXT_COLOR.darker());&#10;&#10;        settingsPanel.getChildren().add(placeholderLabel);&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel);&#10;    }&#10;&#10;    private VBox createSettingsPanel() {&#10;        VBox settingsPanel = new VBox(25);&#10;        settingsPanel.setPadding(new Insets(40, 40, 40, 40));&#10;&#10;        String panelStyle = &quot;-fx-border-color: #00d9ff; &quot; +&#10;                &quot;-fx-border-width: 2px; &quot; +&#10;                &quot;-fx-background-color: rgba(22, 33, 62, 0.8); &quot; +&#10;                &quot;-fx-border-radius: 5px; &quot; +&#10;                &quot;-fx-background-radius: 5px;&quot;;&#10;        settingsPanel.setStyle(panelStyle);&#10;        settingsPanel.setPrefWidth(500 * UI_SCALE_X);&#10;        settingsPanel.setPrefHeight(300);&#10;        settingsPanel.setMaxWidth(500 * UI_SCALE_X);&#10;        settingsPanel.setMaxHeight(300);&#10;        return settingsPanel;&#10;    }&#10;&#10;    private Label createSettingRow(String labelText, ComboBox&lt;String&gt; comboBox) {&#10;        Label label = createLabel(labelText, TEXT_COLOR);&#10;&#10;        comboBox.setPrefWidth(400 * UI_SCALE_X);&#10;        comboBox.setPrefHeight(35);&#10;&#10;        comboBox.setStyle(&quot;-fx-background-color: #2c3e50; &quot; +&#10;                &quot;-fx-font-size: &quot; + (16 * UI_SCALE) + &quot;px;&quot;);&#10;&#10;        comboBox.setButtonCell(new javafx.scene.control.ListCell&lt;&gt;() {&#10;            @Override&#10;            protected void updateItem(String item, boolean empty) {&#10;                super.updateItem(item, empty);&#10;                if (empty || item == null) {&#10;                    setText(null);&#10;                } else {&#10;                    setText(item);&#10;                    setStyle(&quot;-fx-text-fill: white; -fx-background-color: #2c3e50;&quot;);&#10;                }&#10;            }&#10;        });&#10;&#10;        comboBox.setCellFactory(listView -&gt; new javafx.scene.control.ListCell&lt;&gt;() {&#10;            @Override&#10;            protected void updateItem(String item, boolean empty) {&#10;                super.updateItem(item, empty);&#10;                if (empty || item == null) {&#10;                    setText(null);&#10;                } else {&#10;                    setText(item);&#10;                    setStyle(&quot;-fx-text-fill: white; -fx-background-color: #34495e;&quot;);&#10;                }&#10;            }&#10;        });&#10;&#10;        return label;&#10;    }&#10;&#10;    private void applyVideoSettings() {&#10;        Stage stage = (Stage) root.getScene().getWindow();&#10;        if (stage == null) return;&#10;&#10;        String displayMode = displayModeCombo.getValue();&#10;&#10;        if (&quot;Fullscreen&quot;.equals(displayMode)) {&#10;            // Enter fullscreen mode&#10;            stage.setFullScreen(true);&#10;&#10;            // Get screen dimensions and update game dimensions&#10;            javafx.stage.Screen screen = javafx.stage.Screen.getPrimary();&#10;            javafx.geometry.Rectangle2D bounds = screen.getBounds();&#10;&#10;            GAME_WIDTH = bounds.getWidth();&#10;            GAME_HEIGHT = bounds.getHeight();&#10;            updateUIScale();&#10;&#10;            root.setPrefSize(GAME_WIDTH, GAME_HEIGHT);&#10;&#10;            if (onResolutionChange != null) {&#10;                onResolutionChange.run();&#10;            }&#10;&#10;            refresh();&#10;            show();&#10;        } else {&#10;            // Windowed mode&#10;            stage.setFullScreen(false);&#10;&#10;            String resolution = resolutionCombo.getValue();&#10;            if (resolution != null &amp;&amp; resolution.contains(&quot;x&quot;)) {&#10;                String[] parts = resolution.split(&quot;x&quot;);&#10;                try {&#10;                    int width = Integer.parseInt(parts[0]);&#10;                    int height = Integer.parseInt(parts[1]);&#10;&#10;                    GAME_WIDTH = width;&#10;                    GAME_HEIGHT = height;&#10;                    updateUIScale();&#10;&#10;                    root.setPrefSize(width, height);&#10;                    root.setMinSize(width, height);&#10;                    root.setMaxSize(width, height);&#10;                    stage.sizeToScene();&#10;&#10;                    if (onResolutionChange != null) {&#10;                        onResolutionChange.run();&#10;                    }&#10;&#10;                    refresh();&#10;                    show();&#10;                } catch (NumberFormatException e) {&#10;                    System.err.println(&quot;Invalid resolution format: &quot; + resolution);&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private void applyAudioSettings() {&#10;        masterVolume = masterVolumeSlider.getValue();&#10;        muted = muteCheckbox.isSelected();&#10;&#10;        SoundManager soundManager = SoundManager.getInstance();&#10;        soundManager.setMasterVolume(masterVolume / 100.0);&#10;        soundManager.setMuted(muted);&#10;    }&#10;&#10;    @Override&#10;    public void show() {&#10;        if (layout == null) {&#10;            initializeUI();&#10;        }&#10;        if (!root.getChildren().contains(layout)) {&#10;            root.getChildren().add(layout);&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void hide() {&#10;        if (layout != null) {&#10;            root.getChildren().remove(layout);&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void refresh() {&#10;        if (layout != null) {&#10;            hide();&#10;        }&#10;        layout = null;&#10;        contentArea = null;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package userinterface.screen;&#10;&#10;import gamemanager.ui.GameButton;&#10;import gamemanager.ui.UIManager;&#10;import gamemanager.manager.SoundManager;&#10;import javafx.geometry.Insets;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.CheckBox;&#10;import javafx.scene.control.ComboBox;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.control.Slider;&#10;import javafx.scene.layout.*;&#10;import javafx.stage.Stage;&#10;&#10;import static gameconfig.GameConfig.*;&#10;&#10;public class SettingScreen extends UIManager {&#10;    private BorderPane layout;&#10;    private final Runnable onBack;&#10;    private final Runnable onResolutionChange;&#10;    private VBox contentArea;&#10;&#10;    private GameButton videoButton;&#10;    private GameButton audioButton;&#10;    private GameButton debugButton;&#10;&#10;    private ComboBox&lt;String&gt; resolutionCombo;&#10;    private ComboBox&lt;String&gt; displayModeCombo;&#10;&#10;    private Slider masterVolumeSlider;&#10;    private CheckBox muteCheckbox;&#10;    private Label volumeValueLabel;&#10;    private double masterVolume = 100.0;&#10;    private boolean muted = false;&#10;&#10;    private final String[] resolutions = {&quot;1280x720&quot;, &quot;1366x768&quot;, &quot;1600x900&quot;};&#10;    private final String[] displayModes = {&quot;Windowed&quot;, &quot;Fullscreen&quot;};&#10;&#10;    public SettingScreen(Pane root, Runnable onBack, Runnable onResolutionChange) {&#10;        super(root);&#10;        this.onBack = onBack;&#10;        this.onResolutionChange = onResolutionChange;&#10;    }&#10;&#10;    @Override&#10;    protected void initializeUI() {&#10;        layout = new BorderPane();&#10;        layout.setPrefSize(GAME_WIDTH, GAME_HEIGHT);&#10;        layout.setStyle(&quot;-fx-background-color: rgba(44, 62, 80, 0.9);&quot;);&#10;&#10;        VBox sidebar = createSidebar();&#10;        layout.setLeft(sidebar);&#10;&#10;        contentArea = createContentArea();&#10;        layout.setCenter(contentArea);&#10;&#10;        updateContentArea(&quot;VIDEO&quot;);&#10;    }&#10;&#10;    private VBox createSidebar() {&#10;        VBox sidebar = new VBox();&#10;        sidebar.setPrefWidth(280 * UI_SCALE_X);&#10;        sidebar.setStyle(&quot;-fx-background-color: rgba(34, 52, 70, 0.9);&quot;);&#10;        sidebar.setPadding(new Insets(40, 20, 40, 20));&#10;        sidebar.setSpacing(15);&#10;&#10;        createCategoryButtons();&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        GameButton backButton = createButton(&quot;BACK&quot;, onBack);&#10;&#10;        sidebar.getChildren().addAll(videoButton, audioButton, debugButton, spacer, backButton);&#10;        return sidebar;&#10;    }&#10;&#10;    private void createCategoryButtons() {&#10;        videoButton = createButton(&quot;VIDEO&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;        audioButton = createButton(&quot;AUDIO&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;        debugButton = createButton(&quot;DEBUG&quot;, ButtonStyle.CATEGORY_UNSELECTED, null);&#10;&#10;        videoButton.switchStyle(ButtonStyle.CATEGORY_SELECTED);&#10;&#10;        videoButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;VIDEO&quot;, videoButton);&#10;        });&#10;        audioButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;AUDIO&quot;, audioButton);&#10;        });&#10;        debugButton.setOnAction(e -&gt; {&#10;            SoundManager.getInstance().playSound(SoundManager.SoundType.BUTTON_CLICK);&#10;            selectCategory(&quot;DEBUG&quot;, debugButton);&#10;        });&#10;    }&#10;&#10;    private void selectCategory(String category, GameButton selectedButton) {&#10;        videoButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        audioButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        debugButton.switchStyle(ButtonStyle.CATEGORY_UNSELECTED);&#10;        selectedButton.switchStyle(ButtonStyle.CATEGORY_SELECTED);&#10;&#10;        updateContentArea(category);&#10;    }&#10;&#10;    private VBox createContentArea() {&#10;        VBox content = new VBox();&#10;        content.setStyle(&quot;-fx-background-color: transparent;&quot;);&#10;        content.setPadding(new Insets(40, 40, 40, 40));&#10;        return content;&#10;    }&#10;&#10;    private void updateContentArea(String category) {&#10;        contentArea.getChildren().clear();&#10;&#10;        switch (category) {&#10;            case &quot;VIDEO&quot;:&#10;                showVideoSettings();&#10;                break;&#10;            case &quot;AUDIO&quot;:&#10;                showAudioSettings();&#10;                break;&#10;            case &quot;DEBUG&quot;:&#10;                showDebugSettings();&#10;                break;&#10;        }&#10;    }&#10;&#10;    private void showVideoSettings() {&#10;        Label titleLabel = createTitleLabel(&quot;VIDEO SETTINGS&quot;);&#10;        VBox settingsPanel = createVideoSettingsPanel();&#10;        GameButton applyButton = createButton(&quot;✓ APPLY CHANGES&quot;, ButtonStyle.APPLY, this::applyVideoSettings);&#10;&#10;        HBox applyButtonBox = new HBox(applyButton);&#10;        applyButtonBox.setAlignment(Pos.BOTTOM_RIGHT);&#10;        applyButtonBox.setPadding(new Insets(30, 0, 0, 0));&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel, spacer, applyButtonBox);&#10;    }&#10;&#10;    private VBox createVideoSettingsPanel() {&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        displayModeCombo = new ComboBox&lt;&gt;();&#10;        displayModeCombo.getItems().addAll(displayModes);&#10;&#10;        Stage stage = (Stage) root.getScene().getWindow();&#10;        if (stage != null &amp;&amp; stage.isFullScreen()) {&#10;            displayModeCombo.getSelectionModel().select(&quot;Fullscreen&quot;);&#10;        } else {&#10;            displayModeCombo.getSelectionModel().select(&quot;Windowed&quot;);&#10;        }&#10;        Label displayModeLabel = createSettingRow(&quot;Display Mode:&quot;, displayModeCombo);&#10;&#10;        resolutionCombo = new ComboBox&lt;&gt;();&#10;        resolutionCombo.getItems().addAll(resolutions);&#10;        String currentResolution = ((int)GAME_WIDTH) + &quot;x&quot; + ((int)GAME_HEIGHT);&#10;        if (resolutionCombo.getItems().contains(currentResolution)) {&#10;            resolutionCombo.getSelectionModel().select(currentResolution);&#10;        } else {&#10;            resolutionCombo.getSelectionModel().select(0);&#10;        }&#10;        Label resolutionLabel = createSettingRow(&quot;Resolution:&quot;, resolutionCombo);&#10;&#10;        // Disable resolution when fullscreen is selected&#10;        displayModeCombo.valueProperty().addListener((obs, oldVal, newVal) -&gt; {&#10;            resolutionCombo.setDisable(&quot;Fullscreen&quot;.equals(newVal));&#10;        });&#10;&#10;        // Set initial state&#10;        resolutionCombo.setDisable(&quot;Fullscreen&quot;.equals(displayModeCombo.getValue()));&#10;&#10;        VBox displayModeRow = new VBox(5, displayModeLabel, displayModeCombo);&#10;        VBox resolutionRow = new VBox(5, resolutionLabel, resolutionCombo);&#10;&#10;        settingsPanel.getChildren().addAll(displayModeRow, resolutionRow);&#10;        return settingsPanel;&#10;    }&#10;&#10;    private void showAudioSettings() {&#10;        SoundManager soundManager = SoundManager.getInstance();&#10;        masterVolume = soundManager.getMasterVolume() * 100;&#10;        muted = soundManager.isMuted();&#10;&#10;        Label titleLabel = createTitleLabel(&quot;AUDIO SETTINGS&quot;);&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        Label volumeLabel = createLabel(&quot;Master Volume:&quot;, TEXT_COLOR);&#10;        masterVolumeSlider = new Slider(0, 100, masterVolume);&#10;        masterVolumeSlider.setPrefWidth(360 * UI_SCALE_X);&#10;        masterVolumeSlider.setPrefHeight(35);&#10;        masterVolumeSlider.setMajorTickUnit(10);&#10;        masterVolumeSlider.setShowTickMarks(false);&#10;        masterVolumeSlider.setShowTickLabels(false);&#10;&#10;        volumeValueLabel = createLabel((int) masterVolume + &quot;%&quot;, TEXT_COLOR);&#10;        volumeValueLabel.setPadding(new Insets(0, 0, 0, 10));&#10;&#10;        masterVolumeSlider.valueProperty().addListener((&#10;                observable,&#10;                oldValue,&#10;                newValue) -&gt; {&#10;            int val = (int) Math.round(newValue.doubleValue());&#10;            volumeValueLabel.setText(val + &quot;%&quot;);&#10;        });&#10;&#10;        HBox volumeRow = new HBox(10, masterVolumeSlider, volumeValueLabel);&#10;        volumeRow.setAlignment(Pos.CENTER_LEFT);&#10;&#10;        muteCheckbox = new CheckBox(&quot;Mute&quot;);&#10;        muteCheckbox.setStyle(&quot;-fx-text-fill: white;&quot;);&#10;        muteCheckbox.setSelected(muted);&#10;        muteCheckbox.selectedProperty().addListener((&#10;                obs,&#10;                wasSelected,&#10;                isSelected) -&gt; {&#10;            masterVolumeSlider.setDisable(isSelected);&#10;        });&#10;&#10;        VBox volumeSection = new VBox(5, volumeLabel, volumeRow, muteCheckbox);&#10;&#10;        settingsPanel.getChildren().addAll(volumeSection);&#10;&#10;        GameButton applyButton = createButton(&quot;✓ APPLY CHANGES&quot;, ButtonStyle.APPLY, this::applyAudioSettings);&#10;        HBox applyButtonBox = new HBox(applyButton);&#10;        applyButtonBox.setAlignment(Pos.BOTTOM_RIGHT);&#10;        applyButtonBox.setPadding(new Insets(30, 0, 0, 0));&#10;&#10;        Region spacer = new Region();&#10;        VBox.setVgrow(spacer, Priority.ALWAYS);&#10;&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel, spacer, applyButtonBox);&#10;    }&#10;&#10;    private void showDebugSettings() {&#10;        Label titleLabel = createTitleLabel(&quot;DEBUG SETTINGS&quot;);&#10;        VBox settingsPanel = createSettingsPanel();&#10;&#10;        Label placeholderLabel = createLabel(&quot;Debug settings coming soon...&quot;, TEXT_COLOR.darker());&#10;&#10;        settingsPanel.getChildren().add(placeholderLabel);&#10;        contentArea.getChildren().addAll(titleLabel, settingsPanel);&#10;    }&#10;&#10;    private VBox createSettingsPanel() {&#10;        VBox settingsPanel = new VBox(25);&#10;        settingsPanel.setPadding(new Insets(40, 40, 40, 40));&#10;&#10;        String panelStyle = &quot;-fx-border-color: #00d9ff; &quot; +&#10;                &quot;-fx-border-width: 2px; &quot; +&#10;                &quot;-fx-background-color: rgba(22, 33, 62, 0.8); &quot; +&#10;                &quot;-fx-border-radius: 5px; &quot; +&#10;                &quot;-fx-background-radius: 5px;&quot;;&#10;        settingsPanel.setStyle(panelStyle);&#10;        settingsPanel.setPrefWidth(500 * UI_SCALE_X);&#10;        settingsPanel.setPrefHeight(300);&#10;        settingsPanel.setMaxWidth(500 * UI_SCALE_X);&#10;        settingsPanel.setMaxHeight(300);&#10;        return settingsPanel;&#10;    }&#10;&#10;    private Label createSettingRow(String labelText, ComboBox&lt;String&gt; comboBox) {&#10;        Label label = createLabel(labelText, TEXT_COLOR);&#10;&#10;        comboBox.setPrefWidth(400 * UI_SCALE_X);&#10;        comboBox.setPrefHeight(35);&#10;&#10;        comboBox.setStyle(&quot;-fx-background-color: #2c3e50; &quot; +&#10;                &quot;-fx-font-size: &quot; + (19 * UI_SCALE) + &quot;px; &quot; +&#10;                &quot;-fx-font-family: 'Simple Sunrise';&quot;);&#10;&#10;        comboBox.setButtonCell(new javafx.scene.control.ListCell&lt;&gt;() {&#10;            @Override&#10;            protected void updateItem(String item, boolean empty) {&#10;                super.updateItem(item, empty);&#10;                if (empty || item == null) {&#10;                    setText(null);&#10;                } else {&#10;                    setText(item);&#10;                    setStyle(&quot;-fx-text-fill: white; -fx-background-color: #2c3e50;&quot;);&#10;                }&#10;            }&#10;        });&#10;&#10;        comboBox.setCellFactory(listView -&gt; new javafx.scene.control.ListCell&lt;&gt;() {&#10;            @Override&#10;            protected void updateItem(String item, boolean empty) {&#10;                super.updateItem(item, empty);&#10;                if (empty || item == null) {&#10;                    setText(null);&#10;                } else {&#10;                    setText(item);&#10;                    setStyle(&quot;-fx-text-fill: white; -fx-background-color: #34495e;&quot;);&#10;                }&#10;            }&#10;        });&#10;&#10;        return label;&#10;    }&#10;&#10;    private void applyVideoSettings() {&#10;        Stage stage = (Stage) root.getScene().getWindow();&#10;        if (stage == null) return;&#10;&#10;        String displayMode = displayModeCombo.getValue();&#10;&#10;        if (&quot;Fullscreen&quot;.equals(displayMode)) {&#10;            // Enter fullscreen mode&#10;            stage.setFullScreen(true);&#10;&#10;            // Get screen dimensions and update game dimensions&#10;            javafx.stage.Screen screen = javafx.stage.Screen.getPrimary();&#10;            javafx.geometry.Rectangle2D bounds = screen.getBounds();&#10;&#10;            GAME_WIDTH = bounds.getWidth();&#10;            GAME_HEIGHT = bounds.getHeight();&#10;            updateUIScale();&#10;&#10;            root.setPrefSize(GAME_WIDTH, GAME_HEIGHT);&#10;&#10;            if (onResolutionChange != null) {&#10;                onResolutionChange.run();&#10;            }&#10;&#10;            refresh();&#10;            show();&#10;        } else {&#10;            // Windowed mode&#10;            stage.setFullScreen(false);&#10;&#10;            String resolution = resolutionCombo.getValue();&#10;            if (resolution != null &amp;&amp; resolution.contains(&quot;x&quot;)) {&#10;                String[] parts = resolution.split(&quot;x&quot;);&#10;                try {&#10;                    int width = Integer.parseInt(parts[0]);&#10;                    int height = Integer.parseInt(parts[1]);&#10;&#10;                    GAME_WIDTH = width;&#10;                    GAME_HEIGHT = height;&#10;                    updateUIScale();&#10;&#10;                    root.setPrefSize(width, height);&#10;                    root.setMinSize(width, height);&#10;                    root.setMaxSize(width, height);&#10;                    stage.sizeToScene();&#10;&#10;                    if (onResolutionChange != null) {&#10;                        onResolutionChange.run();&#10;                    }&#10;&#10;                    refresh();&#10;                    show();&#10;                } catch (NumberFormatException e) {&#10;                    System.err.println(&quot;Invalid resolution format: &quot; + resolution);&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private void applyAudioSettings() {&#10;        masterVolume = masterVolumeSlider.getValue();&#10;        muted = muteCheckbox.isSelected();&#10;&#10;        SoundManager soundManager = SoundManager.getInstance();&#10;        soundManager.setMasterVolume(masterVolume / 100.0);&#10;        soundManager.setMuted(muted);&#10;    }&#10;&#10;    @Override&#10;    public void show() {&#10;        if (layout == null) {&#10;            initializeUI();&#10;        }&#10;        if (!root.getChildren().contains(layout)) {&#10;            root.getChildren().add(layout);&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void hide() {&#10;        if (layout != null) {&#10;            root.getChildren().remove(layout);&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void refresh() {&#10;        if (layout != null) {&#10;            hide();&#10;        }&#10;        layout = null;&#10;        contentArea = null;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>